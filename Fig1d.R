library(statnet)
library(circlize)
#???ù???Ŀ¼
data<-read.csv("/path",header=T,row=1)
my.data<-as.matrix(data)

rownames(my.data) <-c("Human", "Engineered", "Terrestrial", "Aquatic")
colnames(my.data) <-c("Gammaproteobacteria","Firmicutes","Bacteroidota","Alphaproteobacteria","Actinobacteriota","Verrucomicrobiota","Acidobacteriota","Planctomycetota",
                      "Desulfobacterota",
                      "Chloroflexota","Patescibacteria",
                      "Others") 
grid.col = NULL

# ???崦??????ɫ??????????ѡȡ??4????ɫ?????ҿ??Ը????Լ???ϲ???ƶ??ÿ?????ɫ
grid.col[c("Human", "Engineered", "Terrestrial", "Aquatic")] = c( "#A53F6F","#E9A343","#296065","#5758B4") 

# ????΢?????????ŵ???ɫ??
grid.col[colnames(my.data)] = c("#7D9EC0", "#E27D6F","#A28F7E","#19905A","#4CB4A2","#6E9FB9","#F5E373","black",
                                "#B6BE7C", 
                                "#698B69","#50304E",
                                "#DADADA")
# ????????
circos.par(gap.degree = c(rep(2, nrow(my.data)-1), 10, rep(2, ncol(my.data)-1), 10),
           start.degree = 180)

# ??ͼ??????????ֻ?????ٲ??ֲ????????в??????˰???help?ĵ??????߿?????
chordDiagram(my.data,
             directional = TRUE,
             diffHeight = 0.06,
             grid.col = grid.col,
             transparency = 0.5) 
# ͼ??????
legend(pch=20,legend=colnames(my.data),
       x=1,y=1,
       col=grid.col[colnames(my.data)],bty="n",
       cex=1,pt.cex=3,border="black") # ?趨ͼ??
#?Ƽ???ͼ???ɺ???????Ŀǰ?? circlize ??ʽ??????Ӱ????????ͼ
circos.clear()

